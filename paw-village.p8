pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

#include lib/particles.p8
#include lib/vector.p8
#include lib/scene.p8
#include lib/actor.p8
#include lib/dolly.p8

----------------
-- 5 hits=die
-- 3 -sprite 9
p1 = actor:new({
  frames = 4,
  hearts = 4,
  faceleft = false,
  update = function(self)
    local speed = 0.9000
    if btn(⬅️) then
      self.x -= speed
      self.frame += 0.1
      self.faceleft = false
    end
    if btn(⬆️) then
      self.y -= speed
      self.frame += 0.1
    end
    if btn(➡️) then
      self.x += speed
      self.frame += 0.1
      self.faceleft = true
    end
    if btn(⬇️) then
      self.y += speed
      self.frame += 0.1
    end
  end,
  draw = function(self)
    spr(self.sprite + self.frame % self.frames, 
        self.x, self.y,
        1,      1,
        self.faceleft)
  end,
}, 
122, -- sprite
0,0) -- positions

intro = scene:new {
  update = function(self)
    p1:update()

    if p1.y > 128 then
      p1.x = 18 * 8
      p1.y = 0
      -- return game
      return falling
    end
  end,

  draw = function(self)
    cls(12)

    p1:draw()
    map(0,0,0,0,128,128)

    --hud
    camera(0,0)
    print("paw-village",24,4,7,0,0)
  end
}


game = scene:new {
  cam=dolly:new(
    {
--      pos_min = vec(128 + 64, 64)

    }, p1),
  update = function(self)
    p1:update()
    slime:update()
    self.cam:update()
    if p1.hearts <= 0 then 
      return death
    end
  end,

  draw = function(self)
    cls(0)

    camera(self.cam:cam_pos())

    p1:draw()
    slime:draw()
    map(0,0,0,0,128,128)

    --hud
    camera(0,0)
    print("not so well (shane)",24,4,7,0,0)
    down=111

    for loopy=1,4 do
      fullheart=2
      emptyheart=3
      if p1.hearts >= loopy then  
        spr(fullheart,8 + loopy * 10,down)
      else
        spr(emptyheart,8 + loopy * 10,down)
      end
    end
   
--    for i=1, do
--      spr(8, 8 + i * 10, down - 10)
--    end
  end,
}

death = scene:new {
  draw = function(self)
    cls(0)
    camera(0,0)
    spr(123, 64,42)
    spr(93, 64, 50)
    print("you died. continue or not?", 
      20,
      64)
  end
}

slime = actor:new({
  update = function(self)
    if self:in_bounds(p1.x, p1.y) then
      half=1/60
      p1.hearts = p1.hearts-half
      sfx(4)
    end
  end
}, 
59,
18 * 8, 14 * 8)

--intro:install()
game:install()

__gfx__
00000000000000000808000005050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000008888800055555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000040000888000005550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000044400080000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700040004c400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700044444400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000040000400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000044000440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000e00000e0c00000c070000070400000400000000000000000000000000000000000000000000000000000000400000000000000040000000000000000
00000000eeeeeee0ccccccc077777770444444400000000000000000000000000000000000000000000000000000000444400000000000044440000000000000
00000000eeeeeee0ccc1cc107777777044444440000000000000000000000000000000000000000000000000000000044c400000000000044c40000000000000
00000000eeeeeee01cccccc077777770444444400000000000000000000000000000000000000000000000000100000444400000010000044440000000000000
00000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000000010000444400000001000044440000000000000
00000000fffffff00000000000000000000000000000000000000000000000000000000000000000000000000004444444400000000444444440000000000000
000000000fffff000000000000000000000000000000000000000000000000000000000000000000000000000004444444400000000444444440004000000000
0000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000004444444400000000444444444444000000000
0000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000004000000400000000400000000000000000000
0000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000004000000400000000400000000000000000000
0000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000004000000400000000400000000000000000000
0000000000fff0000000000000000000000000000000000000000000000000000000000000000000000000000004400000440000000440000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000050000000000000500000000000000000050000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000055550000000000555500000000000000055550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000500000055150005000000551500000000500000055150000000000000000000000000000000000
00000000000000000000000000000000000000000000000000050000055550000500000555500000000050000055550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000005000055550000050000555500000000005000055550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000555555550000005555555500000000000555555550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000555555550000005555555500050000000555555550000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000555555550000005555555555550055555555555550000000000000000000000000000000000
00000000000000000000000004000000000000000400000000000500000050000005000000000000050000000000050000000004000000000000000000000000
00000000000000000000000004444000000000000444400000000500000050000005000000000000000000000000050000000004444000000000000000000000
000000000000000000000000044c400000000000044c4000000005000000500000050000000000000000000000000500000000044c4000000000000000000000
00000000000000000001000004444000000100000444400000000550000055000005500000000000000000000000055001000004444000000000000000000000
00000000000000000000100004444000000010000444400000000000000000000000000000000000000000000000000000100004444000000000000000000000
00000000000000000000044444444000000004444444400000000000000000000000000000000000000000000000000000044444444000000000000000000000
00000000000000000000044444444000000004444444400000000000000000000000000000000000000000000000000000044444444000000000000000000000
00000000000000000444444444444000000004444444400000000000000000000000000000000000000000000000000000044444444000000000000000000000
00000000000000000400000000004000000004000000400000000000000000000500000000000000000000000000000000040000004000000000000000000000
00000000000000000000000000004000000004000000400000000000000000000555500000000000000000000000000000040000004000000000000000000000
00000000000000000000000000004000000004000000400000000000005000000551500000000000000000000000000000040000004000000000000000000000
00000000000000000000000000004400000004400000440000000000000500000555500000000000000000000000000000044000004400000000000000000000
00000000000000000000000000000000000000000000000000000000000050000555500000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000555555550000000000000000f0f00000f0f00000f0f00000f0f0000000000000000
0000000000000000000000000000000000000000000000000000000000000555555550000000000000000cfc00000cfc00000cfc00000cfc0000000000000000
00000000000000000000000000000000000000000000000000000000000005555555500000000000f0000feff0000feff0000feff0000fef0000000000000000
000000000000000000000000000000000000000000000000000000000000050000005000000000000fffff000fffff000fffff000fffff000000000000000000
000000000000000000000000000000000000000000000000000000000000050000005000000000000fffff000fffff000fffff000fffff000000000000000000
000000000000000000000000000000000000000000000000000000000000050000005000000000000f000f00ff000f000f000ff00f000f000000000000000000
000000000000000000000000000000000000000000000000000000000000055000005500000000000f000f0000000f000f0000000f000f000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000e00000000000000000000000000000000000000004000000ff00000000000000000000000fe900000000000000000000000000
00000000000000000000000000eee000007007000c00000c00000000a000000a00000000004f00000000000000bbb00000040000000000000000000000000000
00000000000000000000000000e0e000047777400c00000c000000000a0000a00000000000ff00000000000000b0b00000080000000000000000000000000000
00000000000000000000000000eee000007007000c0ccc0c0000000000a00a000004000000fe00000022220000bbb000000c0000000000000700000000000000
00000000000000000000000000e00000047007400c0c0c0c00000000000aa0000004000000ff0000002002000000b0000001e300000000000777700000000000
00000000000000000000000000e00000007777000c0c0c0c00000000000000000004000000fcf8f00022220000b0b0000005000000700000077c700000000000
00000000000000000000000000e00000000000700ccc0ccc00000000000000000004000000fffff00000002000bbb0000006fb00000700000777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777777700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007700000770000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000070000000000000070000000000000000070000000000000007000000000000000500000000000000000000000000000000000000
00000000000000000000000077770000000000077770000000000000077770000000000007777000000000000555500000000000000000000000000000000000
00000000000000000700000077c70000700000077c70000000700000077c700000700000077c7000005000000551500000000000000000000000000000000000
00000000000000000070000077770000070000077770000000070000077770000007000007777000000500000555500000000000000000000000000000000000
00000000000000000007000077770000007000077770000000007000077770000000700007777000000050000555500000000000000000000000000000000000
00000000000000000000777777770000000777777770000000000777777770000000077777777000000005555555500000000000000000000000000000000000
00000000000000000000777777770000000777777770007000000777777770000000077777777000000005555555500000000000000000000000000000000000
00000000000000000000777777770000000777777777777007777777777770000000077777777000000005555555500000000000000000000000000000000000
00000000000000000000700000070000000700000000000007000000000070000000070000007000000005000000500000000000000000000000000000000000
00000000000000000000700000070000000700000000000000000000000070000000070000007000000005000000500000000000000000000000000000000000
00000000000000000000700000070000000700000000000000000000000070000000070000007000000005000000500000000000000000000000000000000000
00000000000000000000770000077000000770000000000000000000000077000000077000007700000005500000550000000000000000000000000000000000
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000ffffffffeeeeeeeeddddddddcccccccc11111111bbbbbbbbaaaaaaaa8888888877777777666666665555555544444444333333332222222299999999
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000009000000000000009000000000000000000900000000000000900000000000000500000000000000500000000000000000050000000000000
00000000000000009999000000000009999000000000000000999900000000000999900000000000555500000000000555500000000000000055550000000000
00000000090000009919000090000009919000000009000000991900009000000991900005000000551500005000000551500000000500000055150000000000
00000000009000009999000009000009999000000000900000999900000900000999900000500000555500000500000555500000000050000055550000000000
00000000000900009999000000900009999000000000090000999900000090000999900000050000555500000050000555500000000005000055550000000000
00000000000099999999000000099999999000000000009999999900000009999999900000005555555500000005555555500000000000555555550000000000
00000000000099999999000000099999999000090000009999999900000009999999900000005555555500000005555555500005000000555555550000000000
00000000000099999999000000099999999999990999999999999900000009999999900000005555555500000005555555555555055555555555550000000000
00000000000090000009000000090000000000000900000000000900000009000000900000005000000500000005000000000000050000000000050000000000
00000000000090000009000000090000000000000000000000000900000009000000900000005000000500000005000000000000000000000000050000000000
00000000000090000009000000090000000000000000000000000900000009000000900000005000000500000005000000000000000000000000050000000000
00000000000099000009900000099000000000000000000000000990000009900000990000005500000550000005500000000000000000000000055000000000
__gff__
0000000000000000000000000000000000000000000000000000000202020200000000000000000000000002020202000000000000000000000000000000000000000000000020202020202000000000000002020202202020202020000000000000020202020020202020000000000000000000000000202020202020200000
0000000000000000000000000000000000000000000000000000000000000000000004040404040404044040000000000000040404040404040440400000000000000000000000000000000000000000000000000000000000000000000000000001010101010101014040404040400000010101010101010140404040404000
__map__
000000000000000000000000000000000000000000000000000000000000000000000000000000c700c700c7c700c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000c7000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000c700000000000000000000000000000000000000000000000000000000000000c7000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000c7000000000000000000000000000000000000000000000000000000000000c70000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000c7c7000000000000000000000000000000000000000000000000000000c7c7000000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000c700000000000000000000000000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000c70000000000000000000000000000000000000000000000c700000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000c70000000000000000000000000000000000000000c7000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000000000000000000000c70000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c700000000000000000000000000000000c70000000000000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000c7c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c7000000000000000000000000000000c7000000000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c700000000000000000000000000c7000000000000000000000000000000000000000000c7c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000000000c700000000000000000000000000000000000000c700c7c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c70000000000000000c7000000000000000000000000000000000000c7c700c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000c7c700c700c7c7000000000000000000000000000000000000c7c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000c7c7c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000c7c700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
