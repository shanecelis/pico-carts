pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
-- pooh platformer
#include lib/vector.p8
#include lib/actor.p8
#include lib/platformer.p8
#include lib/dolly.p8


function std_anim(start, walk_speed)
  return {
    stand= {
      ticks=1,--how long is each frame shown.
      frames={start+1},--what frames are shown.
    },
    walk= {
      ticks=walk_speed or 5,
      frames={start+2,start+3,start+4,start+5},
    },
    jump= {
      ticks=1,
      frames={start},
    },
    slide= {
      ticks=1,
      frames={start+6},
    },
  }
end
--_init the game to its initial
--state.
function _init()
  pooh=jumper:new
  { x=44, y=24,

    max_dx=0.8,--max x speed
    anims=std_anim(145, 6),
    min_jump_press=2,
    max_jump_press=6,
  }

  piglet=jumper:new
  { x=44, y=24,

    max_dx=0.7,--max x speed
    anims=std_anim(161, 5),
    min_jump_press=1,
    max_jump_press=3,
  }
  eyore=jumper:new
  { x=44, y=24,

    max_dx=0.8,--max x speed
    anims=std_anim(177, 6),
    min_jump_press=2,
    max_jump_press=6,
  }

  p1 = eyore
  cam=dolly:new(
    {
      pos_min=vec:new(64,64),
      pos_max=vec:new(128 * 8,64 * 8),

    }, p1)
end

--p8 functions
--------------------------------

function _update60()
  p1:update()
  cam:update()
  --demo camera shake
  if(btnp(4))cam:shake(15,2)
end

function _draw()

  cls(0)

  camera(cam:cam_pos())

  map(0,0,0,0,128,128)

  p1:draw()

  --hud
  --camera(0,0)
end

__gfx__
1234567000000000000000000000000000000000000000000000000000000000000000000000000494444490000000000000000000000000000000000000000
89abcdef000000000000000000000000000000000000000000000000000000000000000000000000449994940000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070700000000000000000000000000
0007700000000000000000000000000000000000000000000000000000aa0aa00000000000000000000000000000000000009000000000330303300000000000
00700700000000000000000000000000000000000000000000000000002a02a00000000000000000000000000000000000000000000033333333330333000000
00000000000000000000000000000000000000000000000000000000002a02a00440440000000000000000000000000000000000000333333333333333300000
00000000000000000000000000000000000000000000000000000000002a02a00240240000000000000000000000000000000000000333333333333333330000
00000000000009900000000000000000000099000aaaa00000444400000aaaa00044440000005500000000000000000000000000000033333333333333330000
0000000000999990000000e0000000400999990000a5aa500004544505aa5a005445400005552500000000000000000000000000000003333333333333330000
0000000005995900000eee00000444005995900000aaaa000004444000aaaa000444400075752500000000000000000000000000000033333333333333300000
0000000000999900005e5e000054540009999000000aa00000004400000aa0000044000066550000000000000000000000000000000033333333333333330000
0000000000888800000eee0000044400099550000aaaaaa0004444440aaaaaa04444440066555555600000000000000000000000000333333333333333330000
000000000988889000e888e0004ccc409999900000aaaa004004444000aaaa000444400400055555060000000000000000000000000333333333333333300000
0000000000999900000eee00000444000995590900aaaa004444444000aaaa00044444440005555500e000000000000000000000000033333333333333330000
0000000000900900000e0e00000404000900909000a00a000004004000a00a000400400000050005000000000000000000000000000003333333333333300000
44499944000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000003333333333333300000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000003333333333333000000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000333333333330000000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000004333443400000000
44999094000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000004444444400000000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000004444444400000000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000004444444400000000
44999994000000000000000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000004444444400000000
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000111111112222222233333333444444445555555566666666777777778888888899999999aaaaaaaabbbbbbbbccccccccddddddddeeeeeeeeffffffff
00000000000990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000a99a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009aa9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0099900000099000000099a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
044444000000000000099a9900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
004440000000000000099a9900000000000000000000000000000000000000000000000000000000000000000000000000000400004400000000000000000000
0044400000000000000099a000000000000000000000000000000000000000000000000000000000000000000000000004000040000404040000000000000000
000000000000000000000000000b0000000000000000000000000000000000000000000000000000000000000000000000444444444444440044444400000000
0000000000000000000000000bbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000099000000000
00000000000000000000000000bbb0000000004400000000000000000000000000000800000000000099a0000000000000000000000000000000a99a00000000
00000000000000000000000000999000040004400000000000000000000000000005555000000000099a990000000000000000000000000000009aa900000000
00000000000000000000000000999000044444000033300000000000000000000005555000000000099a99000000000000000000000000000000999900000000
007cccc00b0b000b00000000009990000444455003333300004040400040000000000400000000000099a0000099a00000000000000000000000099000000000
0044444009090b090000990b00090000044455550333330000444440044400000000040000444000004440000944490000000000000000000000000000000000
0040004044444444009999bb0009000004000550003330000044f440044400000000040004444400044444000444449000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01234567001115000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
89abcdef011716000011150000011150000111500001115000011150011150000000000000000000000000000000000000000000000000000000000000000000
00700700717872600117160000117160001171600011716000117160017160000000000000000000000000000000000000000000000000000000000000000000
00077000061775000178725000178720001787200017872000178720078725000000000000000000000000000000000000000000000000000000000000000000
00077000006660000017760000017760000177600001776000017760017760000000000000000000000000000000000000000000000000000000000000000000
00700700009950000066600007666600076666000766660007666600076600000000000000000000000000000000000000000000000000000000000000000000
00000000000550000755560009555000005990000055500000555000995500000000000000000000000000000000000000000000000000000000000000000000
00000000000044000990440000904400004400000990440000440000044000000000000000000000000000000000000000000000000000000000000000000000
00000000099000000990000000990000009900000099000000990000099000000000000000000000000000000000000000000000000000000000000000000000
00000000099999000999990000999990009999900099999000999990099999000000000000000000000000000000000000000000000000000000000000000000
00000000009599500095995000095995000959950009599500095995009599500000000000000000000000000000000000000000000000000000000000000000
0000000000999e000099990000099990000999900009999000099990009999000000000000000000000000000000000000000000000000000000000000000000
00000000098888000088880009888800008888000088880009888800988880000000000000000000000000000000000000000000000000000000000000000000
00000000008888900988889000888800098888000988880000888800088880000000000000000000000000000000000000000000000000000000000000000000
00000000000999000099990000999900009999000099990000999900099990000000000000000000000000000000000000000000000000000000000000000000
00000000000000900090090009000900009000000090090000909000909000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000e0000000e00000000e0000000e0000000e0000000e0000000e000000000000000000000000000000000000000000000000000000000000000000000
0000000000eee00000eee000000eee00000eee00000eee00000eee00000eee000000000000000000000000000000000000000000000000000000000000000000
0000000000e5e50000e5e500000e5e50000e5e50000e5e50000e5e50000e5e500000000000000000000000000000000000000000000000000000000000000000
0000000000ee200000eee000000eee000e0eee00000eee000e0eee00000eee000000000000000000000000000000000000000000000000000000000000000000
000000000e888e000e888e000e888000008880000e888000008880000e8880000000000000000000000000000000000000000000000000000000000000000000
00000000000ee00000eee00000eee00000eee00000eee00000eee00000eee0000000000000000000000000000000000000000000000000000000000000000000
0000000000000e0000e0e0000e00e00000e0000000e0e0000000e0000e0e00000000000000000000000000000000000000000000000000000000000000000000
00000000500050000055000000550000002505200055000000550000005500000000000000000000000000000000000000000000000000000000000000000000
00000000555550000052555000525550000757000052555000525550005255500000000000000000000000000000000000000000000000000000000000000000
00000000555550000052575700525757500666000052575700525757005257570000000000000000000000000000000000000000000000000000000000000000
000000005555557e0000556600005566055666000000556600005566000055660000000000000000000000000000000000000000000000000000000000000000
00000000000055775555556605555566055555005555556605555566555555660000000000000000000000000000000000000000000000000000000000000000
00000000005257575555500005555000055555005555500005555000555550000000000000000000000000000000000000000000000000000000000000000000
00000000005255505555500055555000055555005555500055555000555550000000000000000000000000000000000000000000000000000000000000000000
00000000005500005000500000005000000005005000500000005000500050000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777700000770000077770000777700007007000077770000777700007777000077770000777700007777000000000000000000000000000000000000000000
00700700000070000000070000000700007007000070000000700000000007000070070000700700007007000000000000000000000000000000000000000000
00777700000070000077770000777700007777000077770000777700000007000077770000777700007007000000000000000000000000000000000000000000
00700000000070000070000000000700000007000000070000700700000007000070070000000700007007000000000000000000000000000000000000000000
00700000007777000077770000777700000007000077770000777700000007000077770000777700007777000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006666666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006666666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677777777777766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677777777777766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677000000007766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677777777777766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006677777777777766000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006666666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006666666666666666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000002000000000000000000000000000000000000000000000000000100000000000000000000000000000100000000000000000000000100000000000000000000000000000000000000000000000000000000020202000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
d0d1d1d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c2d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c3d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c4d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c5d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c6d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c7d1d1d1d1d1d1d1d1d1d1d1d1d2
e01e331f3030303030303030303030e2e01e331f3030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e030e1303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e02e2e2f3030303030303030303030e2e02e2e2f3030303030303030303030e2e03030303030300d0e0f3030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e03434303030303030303030303030e2e03434303030303030303030303030e2e03030303030301d1e1f3030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e03434303030303030303030303030e2e03434303030303030303030303030e2e03030303030302d2e2f3030303030e2e03030303030003030303030303030e2e03030303030003030300030303030e2e03030303030303030300730303030e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e03420013030303030303030303030e2e03420303030303001303030303030e2e03030303030011220303030303030e2e0303030090a551130303055305530e2e03030303030551930303055015530e2e03030303001525151511754523030e2e03030553030303001575613573058e2e03030303030035630573058300130e2
e03f3f3f3f3f3f3f3f3f3f3f3f3f3f0a0a3f3f3f3f3f3f3f3f3f3f3f3f3f3fe2e03f3f3f3f3f3f3f3f3f3f3f3f3f3fe2e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333242424242433333333e2e03333333333243324242424243333e2e03333243324242424243333333333e2
f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2
d0c0c8d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c9d1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1cad1d1d1d1d1d1d1d1d1d1d1d2d0c0c1c1d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1c2d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1c3d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1c4d1d1d1d1d1d1d1d1d1d1d1d2d0c0c1c5d1d1d1d1d1d1d1d1d1d1d1d2
e03030303030303030303030303434e2e030303030303030303030300c3434e2e03030303030303030303030303434e2e03030303030303030303030303434e2e03030303030303030300c30303434e2e03030303030303030303030303434e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e030303030303030300c304c4d3434e2e0303030303030303030304c4d3434e2e03030303030303030300c4c4d3434e2e0303030303030303030304c4d3434e2e030303030300c303030304c4d3434e2e0300c30303030303030304c4d3434e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e0303030303030303030305e5d3434e2e0303030303030303030305e5d3434e2e0303030303030303030305e5d3434e2e03030303030303030300c5c5d3434e2e0303030303030303030305c5d3434e2e0303030303030303030305c5d3434e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e03030303030303030303030493434e2e03030303030303030300c30493434e2e03030303030303030303030493434e2e0303030303030303030300c493434e2e03030303030303030303030493434e2e03030303030303030303030493434e2e03030303030303030303030303030e2e03030303030303030303030303030e2
e03030300130305930303030303434e2e03030303030305901303030303434e2e03030303030045911303030303434e2e03030303030305911300442303434e2e03030303030305a11301430303434e2e03030303030015b30303030303434e2e03030553030303057035611573058e2e03030303030303030303030303030e2
e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333333333333333333333e2e03333333333243324242424243333e2e03030303030303030303030303030e2
f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2f0f1f1f1f1f1f1f1f1f1f1f1f1f1f1f2
__sfx__
000100001b02000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001e05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
