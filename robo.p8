pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
-- robo.
-- by ryland.
 
pages = {
{[[q?]], 
choices = {
 "go to the pond", 3,
 "", 4
 },
}
}
-->8
#include text-box.p8
#include plist.p8
#include page.p8
#include message.lua
#include util.p8
-- book code

--_book = book:new({ page_class = cardinal_page }, pages)
_book = book:new({}, pages)
for i, p in pairs(_book.pages) do
  if i > 100 then
    local default_page = flr(i/100)
    if (not p.scene or p.scene == i) p.scene = default_page
    if (not p.nextpage) p.nextpage = default_page
  end
end
records = nil



function _init()
--  scan_sprites()
  l = plist:new(nil, {1, 2, 3, 4})
  printh(dump(l))
  printh(dump(l.keys))
  printh("count " ..#l)
  l['a'] = 5
  printh(dump(l))
  -- stop()
end

function _update()
  _book._page:update()
end


function _draw()
  _book._page:draw()
  -- if records ~= nil and frame % 20 == 0 then
	-- 	  anim_map(records)
	-- end
end

__gfx__
000000000ccc0000000000000000ccc000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
000000000c5c0000000000000000c5c000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
007007000ccc0000000000000000ccc000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
0007700000500000000000000000050000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
000770000cccc00000000000000cccc000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
007007000ccccc500000000005ccccc000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
000000000cccc00000000000000cccc000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
0000000009000900000000000090009000000000bbbbbbbb3333333300000000cccccccc00000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbb00000000cccccccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000070070000000000000000000bbbbbbbb00000000cccccccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000007700000000000000000000bbbbbbbb00000000cccccccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000007700000000000000000000bccccccb00000000ccc9cccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000070070000000000000000000bccccbcb00000000cccc99cc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bccccccb00000000ccc9cccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bccccccb00000000cccccccc0000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bbbbbbbb00000000cccccccc0000000000000000
00000000cccccccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000cc8888cc0000000000000000000000000050000000000000000000000000000000000000000500000000000000000000000000000000000000000000
00000000cc8888cc0000000000555500000000000050000000000000000000000000000000000000000500000500050000000000000000000000000000000000
00000000cc8888cc0000000000500500055555000050000000000000000000000000000000000000000500000050500000000000000000000000000000000000
00000000cc4444cc0000000000555500050005000055555000000000055555000000000000000000000555500005000000000000000000000000000000000000
00000000cc4aa4cc0000000000500000050005000050005000000000050005000000000000000000000500500005000000000000000000000000000000000000
00000000cc4a54cc0000000000555000050005000050005000000000050005000000000000000000000500500005000000000000000000000000000000000000
00000000bb4aa4bb0000000000505000055555000055555000000000055555000000000000000000000555500005000000000000000000000000000000000000
000000000000000000000000000000000000000000500000000000000000000000000000cccccccc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000000000000000000000000000cccccccc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000000000000000000000050000cccccc9c000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000005500000000000000050000ccccc5cc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000005550000555050055550000cc488ccc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000005050000505050050050000cc488ccc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000500000005555000505550050050000bc4ccccc000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000555500005005500505550055550000bb4bbbbb000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000002324252700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000002a2b00232b353637380000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
